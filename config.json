{
  "name": "MSSQL",
  "viewName": "MS SQL Server",
  "type": "executer",
  "imgUrl": "logo.png",
  "execProgram": "node",
  "main": "app.js",
  "version": "1.0.4",
  "description": "Run commands and scripts on Microsoft SQL Server.",
  "category": "DATABASE",
  "keywords": ["database", "db", "sql", "ms", "table", "query", "run"],
  "auth": {
    "authId": "mssqlAccount",
    "params": [
      {
        "name": "host",
        "viewName": "Host",
        "type": "string",
        "required": true
      },
      {
        "name": "username",
        "viewName": "Username",
        "type": "string",
        "required": true
      },
      {
        "name": "password",
        "viewName": "Password",
        "type": "vault"
      },
      {
        "name": "additionalConnectionStringItems",
        "viewName": "Additional Connection String Items",
        "type": "text",
        "parserType": "keyValuePairs"
      }
    ]
  },
  "methods": [
    {
      "name": "executeQuery",
      "viewName": "Execute Query",
      "params": [
        {
          "name": "query",
          "viewName": "Query String",
          "type": "text",
          "description": "The SQL query to execute.",
          "required": true
        }
      ]
    },
    {
      "name": "executeSQLFile",
      "viewName": "Execute SQL File",
      "params": [
        {
          "name": "path",
          "viewName": "SQL File Path",
          "type": "string",
          "description": "The path on the agent, of the file containing the SQL script to execute.",
          "required": true
        }
      ]
    },
    {
      "name": "testConnectivity",
      "viewName": "Test Connectivity",
      "params": []
    },
    {
      "name": "getTablesLocks",
      "viewName": "Get Tables Locks",
      "params": [
        {
          "name": "db",
          "viewName": "Database",
          "type": "autocomplete",
          "autocompleteType": "function",
          "functionName": "listDatabasesOrAll",
          "description": "If specified, return information only on tables from this database."
        },
        {
          "name": "table",
          "viewName": "Table",
          "type": "autocomplete",
          "autocompleteType": "function",
          "functionName": "listTablesOrAll",
          "description": "If specified, return information only on the specified table."
        }
      ]
    },
    {
      "name": "getServerVersion",
      "viewName": "Get Server Version",
      "params": []
    },
    {
      "name": "getDbSize",
      "viewName": "Get Databases Size",
      "params": [
        {
          "name": "db",
          "viewName": "Database",
          "type": "autocomplete",
          "autocompleteType": "function",
          "functionName": "listDatabasesOrAll",
          "description": "If specified, return only the size of the specified database."
        }
      ]
    },
    {
      "name": "getTablesSize",
      "viewName": "Get Tables Size",
      "params": [
        {
          "name": "db",
          "viewName": "Database",
          "type": "autocomplete",
          "autocompleteType": "function",
          "functionName": "listDatabasesOrAll",
          "description": "If specified, return information only on tables from this database."
        },
        {
          "name": "table",
          "viewName": "Table",
          "type": "autocomplete",
          "autocompleteType": "function",
          "functionName": "listTablesOrAll",
          "description": "If specified, return information only on this table."
        }
      ]
    },
    {
      "name": "createUser",
      "viewName": "Create User",
      "params": [
        {
          "name": "user",
          "viewName": "Username",
          "type": "string",
          "description": "The username to identify the new user by.",
          "required": true
        },
        {
          "name": "pass",
          "viewName": "Password",
          "type": "vault",
          "description": "The password for the new user.",
          "required": true
        },
        {
          "name": "role",
          "viewName": "Role",
          "type": "autocomplete",
          "autocompleteType": "function",
          "functionName": "listRolesAuto",
          "description": "If specified assign the specified role to the new user.",
          "required": true
        },
        {
          "name": "db",
          "viewName": "DB Permission",
          "type": "autocomplete",
          "autocompleteType": "function",
          "functionName": "listDatabasesAuto",
          "description": "Database to give permissions on.",
          "required": true
        },
        {
          "name": "dbScope",
          "viewName": "Database Permission Scope",
          "type": "options",
          "options": [
            {
              "id": "READ",
              "name": "Read Only"
            },
            {
              "id": "WRITE",
              "name": "Write/Update Only"
            },
            {
              "id": "READ_WRITE",
              "name": "Read And Write"
            },
            {
              "id": "CONTROL",
              "name": "Control"
            },
            {
              "id": "ALTER",
              "name": "Alter"
            },
            {
              "id": "FULL",
              "name": "Full Access"
            }
          ],
          "description": "If specified grant the new user the specified scope of permissions in the above database.",
          "learnUrl": "https://docs.microsoft.com/en-us/sql/t-sql/statements/grant-database-permissions-transact-sql?view=sql-server-ver15#remarks",
          "required": true
        },
        {
          "name": "table",
          "viewName": "Table Permission",
          "type": "autocomplete",
          "autocompleteType": "function",
          "functionName": "listTablesAuto",
          "description": "Table to give permissions on.",
          "required": true
        },
        {
          "name": "tableScope",
          "viewName": "Table Permission Scope",
          "type": "options",
          "options": [
            {
              "id": "READ",
              "name": "Read Only"
            },
            {
              "id": "WRITE",
              "name": "Write(Insert/Update/Delete) Only"
            },
            {
              "id": "READ_WRITE",
              "name": "Read And Write"
            },
            {
              "id": "FULL",
              "name": "Full Access"
            }
          ],
          "description": "If specified grant the new user the specified scope of permissions in the above table.",
          "learnUrl": "https://docs.microsoft.com/en-us/sql/t-sql/statements/grant-object-permissions-transact-sql?view=sql-server-ver15#remarks",
          "required": true
        }
      ]
    },
    {
      "name": "grantDbPermissions",
      "viewName": "Grant Database Permissions",
      "params": [
        {
          "name": "user",
          "viewName": "User",
          "type": "autocomplete",
          "autocompleteType": "function",
          "functionName": "listUsersAuto",
          "description": "The user to grant permission to",
          "required": true
        },
        {
          "name": "db",
          "viewName": "DB",
          "type": "autocomplete",
          "autocompleteType": "function",
          "functionName": "listDatabasesAuto",
          "description": "The database to give permmision on.",
          "required": true
        },
        {
          "name": "scope",
          "viewName": "Permission Scope",
          "type": "options",
          "options": [
            {
              "id": "READ",
              "name": "Read Only"
            },
            {
              "id": "WRITE",
              "name": "Write/Update Only"
            },
            {
              "id": "READ_WRITE",
              "name": "Read And Write"
            },
            {
              "id": "CONTROL",
              "name": "Control"
            },
            {
              "id": "ALTER",
              "name": "Alter"
            },
            {
              "id": "FULL",
              "name": "Full Access"
            }
          ],
          "description": "The scope of the permissions to give to the user.",
          "learnUrl": "https://docs.microsoft.com/en-us/sql/t-sql/statements/grant-database-permissions-transact-sql?view=sql-server-ver15#remarks",
          "required": true
        }
      ]
    },
    {
      "name": "grantTablePermissions",
      "viewName": "Grant Table Permissions",
      "params": [
        {
          "name": "user",
          "viewName": "User",
          "type": "autocomplete",
          "autocompleteType": "function",
          "functionName": "listUsersAuto",
          "description": "The user to grant permission to",
          "required": true
        },
        {
          "name": "db",
          "viewName": "DB",
          "type": "autocomplete",
          "autocompleteType": "function",
          "functionName": "listDatabasesAuto",
          "description": "The database to select the table from.",
          "required": true
        },
        {
          "name": "table",
          "viewName": "Table",
          "type": "autocomplete",
          "autocompleteType": "function",
          "functionName": "listTablesAuto",
          "description": "The table to give permission on.",
          "required": true
        },
        {
          "name": "scope",
          "viewName": "Permission Scope",
          "type": "options",
          "options": [
            {
              "id": "READ",
              "name": "Read Only"
            },
            {
              "id": "WRITE",
              "name": "Write/Update Only"
            },
            {
              "id": "READ_WRITE",
              "name": "Read And Write"
            },
            {
              "id": "FULL",
              "name": "Full Access"
            }
          ],
          "description": "The scope of the permissions to give to the user.",
          "learnUrl": "https://docs.microsoft.com/en-us/sql/t-sql/statements/grant-object-permissions-transact-sql?view=sql-server-ver15#remarks",
          "required": true
        }
      ]
    },
    {
      "name": "createRole",
      "viewName": "Create Role",
      "params": [
        {
          "name": "role",
          "viewName": "Role Name",
          "type": "string",
          "required": true
        },
        {
          "name": "db",
          "viewName": "DB Permission",
          "type": "autocomplete",
          "autocompleteType": "function",
          "functionName": "listDatabasesAuto",
          "description": "Database to give permissions on."
        },
        {
          "name": "dbScope",
          "viewName": "Database Permission Scope",
          "type": "options",
          "options": [
            {
              "id": "READ",
              "name": "Read Only"
            },
            {
              "id": "WRITE",
              "name": "Write/Update Only"
            },
            {
              "id": "READ_WRITE",
              "name": "Read And Write"
            },
            {
              "id": "CONTROL",
              "name": "Control"
            },
            {
              "id": "ALTER",
              "name": "Alter"
            },
            {
              "id": "FULL",
              "name": "Full Access"
            }
          ],
          "description": "If specified grant the new role the specified scope of permissions in the above database.",
          "learnUrl": "https://docs.microsoft.com/en-us/sql/t-sql/statements/grant-database-permissions-transact-sql?view=sql-server-ver15#remarks"
        },
        {
          "name": "table",
          "viewName": "Table Permission",
          "type": "autocomplete",
          "autocompleteType": "function",
          "functionName": "listTablesAuto",
          "description": "Table to give permissions on."
        },
        {
          "name": "tableScope",
          "viewName": "Table Permission Scope",
          "type": "options",
          "options": [
            {
              "id": "READ",
              "name": "Read Only"
            },
            {
              "id": "WRITE",
              "name": "Write(Insert/Update/Delete) Only"
            },
            {
              "id": "READ_WRITE",
              "name": "Read And Write"
            },
            {
              "id": "FULL",
              "name": "Full Access"
            }
          ],
          "description": "If specified grant the new role the specified scope of permissions in the above table.",
          "learnUrl": "https://docs.microsoft.com/en-us/sql/t-sql/statements/grant-object-permissions-transact-sql?view=sql-server-ver15#remarks"
        }
      ]
    },
    {
      "name": "addRoleMember",
      "viewName": "Add Role Member",
      "params": [
        {
          "name": "user",
          "viewName": "User",
          "type": "autocomplete",
          "autocompleteType": "function",
          "functionName": "listUsersAuto",
          "description": "The user to add as role member."
        },
        {
          "name": "role",
          "viewName": "Role",
          "type": "autocomplete",
          "autocompleteType": "function",
          "functionName": "listRolesAuto",
          "description": "The role to add a member to. Will grant the user all the permissions this role has."
        }
      ]
    },
    {
      "name": "listDbs",
      "viewName": "List Databases",
      "params": []
    },
    {
      "name": "listRoles",
      "viewName": "List Roles",
      "params": []
    },
    {
      "name": "listUsers",
      "viewName": "List Users",
      "params": []
    },
    {
      "name": "listTables",
      "viewName": "List Tables",
      "params": [
        {
          "name": "db",
          "viewName": "Database",
          "type": "autocomplete",
          "autocompleteType": "function",
          "functionName": "listDatabasesOrAll",
          "description": "The database to list its tables"
        }
      ]
    }
  ]
}
